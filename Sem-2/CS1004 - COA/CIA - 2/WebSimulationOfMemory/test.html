<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Direct Cache Mapping Simulation</title>
    <style>
        /* Add your CSS styling here */
    </style>
</head>
<body>
    <h1>Direct Cache Mapping Simulation</h1>

    <div id="cache">
        <h2>Cache Memory</h2>
        <!-- Display cache lines and byte values -->
        <div id="cache-lines">
            <!-- Cache lines will be dynamically generated here -->
        </div>
    </div>

    <div id="main-memory">
        <h2>Main Memory</h2>
        <!-- Display main memory lines and byte values -->
        <div id="main-memory-lines">
            <!-- Main memory lines will be dynamically generated here -->
        </div>
    </div>

    <div id="user-input">
        <h2>Search Byte</h2>
        <input type="text" id="search-byte" placeholder="Enter byte value">
        <button onclick="searchByte()">Search</button>
    </div>

    <div id="result">
        <!-- Display search result -->
    </div>

    <script>
        // JavaScript code for cache simulation
        // Define cache and main memory parameters
        const cacheSize = 4;
        const cacheLineSize = 4;
        const mainMemorySize = 16;
        const mainMemoryLineSize = 4;

        // Initialize cache and main memory arrays
        let cache = new Array(cacheSize).fill(null).map(() => new Array(cacheLineSize).fill(null));
        let mainMemory = new Array(mainMemorySize).fill(null).map(() => new Array(mainMemoryLineSize).fill(null));

        // Function to search for byte in cache
        function searchByte() {
            const searchValue = document.getElementById('search-byte').value;
            let cacheIndex = parseInt(searchValue) % cacheSize;
            let result = '';

            // Search for byte in cache
            let cacheHit = false;
            for (let i = 0; i < cacheLineSize; i++) {
                if (cache[cacheIndex][i] === searchValue) {
                    cacheHit = true;
                    result = `Byte ${searchValue} found in cache at line ${cacheIndex}`;
                    break;
                }
            }

            // If byte not found in cache, fetch from main memory
            if (!cacheHit) {
                result = `Byte ${searchValue} not found in cache. Fetching from main memory...`;
                // Fetch byte from main memory and update cache
                fetchFromMainMemory(searchValue, cacheIndex);
            }

            // Display search result
            document.getElementById('result').textContent = result;
            // Update cache display
            updateCacheDisplay();
        }

        // Function to fetch byte from main memory and update cache
        function fetchFromMainMemory(byteValue, cacheIndex) {
            // Calculate main memory address
            let mainMemoryAddress = parseInt(byteValue) % mainMemorySize;
            // Update cache with fetched byte
            cache[cacheIndex] = mainMemory[mainMemoryAddress];
        }

        // Function to initialize cache and main memory display
        function initializeDisplay() {
            // Display cache memory
            updateCacheDisplay();

            // Display main memory
            let mainMemoryLinesHTML = '';
            for (let i = 0; i < mainMemorySize; i++) {
                mainMemoryLinesHTML += `<div>Line ${i}: ${mainMemory[i].join(', ')}</div>`;
            }
            document.getElementById('main-memory-lines').innerHTML = mainMemoryLinesHTML;
        }

        // Function to update cache display
        function updateCacheDisplay() {
            let cacheLinesHTML = '';
            for (let i = 0; i < cacheSize; i++) {
                cacheLinesHTML += `<div>Line ${i}: ${cache[i].join(', ')}</div>`;
            }
            document.getElementById('cache-lines').innerHTML = cacheLinesHTML;
        }

        // Initialize display when the page loads
        window.onload = initializeDisplay;
    </script>
</body>
</html>
